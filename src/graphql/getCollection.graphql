#import "./fragments/basicComment.graphql"

query getCollection($id: Int!, $limit: Int, $end: Int) {
  collection(localId: $id) {
    id
    localId
    icon
    name
    content
    followed
    followers {
      totalCount
    }
    summary
    community {
      localId
      id
      name
      followed
    }
    inbox (limit: $limit, after:$end) {
            pageInfo {
                startCursor
                endCursor
            }
            edges {
                node {
                    id
                    activityType
                    type
                    published
                    object {
                        __typename
                        ... on Community {
                        id
                        name
                        localId
                        }
                         ... on Comment {
                        id
                        localId
                        content
                        inReplyTo {
                            localId
                        }
                          context {
                             __typename
                             ... on Community {
                               id
                               name
                               localId
                             }
                             ... on Collection {
                               id
                               name
                               localId
                             }
                           }
                        }
                        ... on Collection {
                        id
                        name
                        localId
                        }
                         ... on Resource {
                        id
                        name
                        localId
                        collection {
                            name
                            localId
                        }
                        }
                    }
                    user {
                        name
                        id
                        localId
                        icon
                    }
                }
            }
        }
    threads {
             edges {
                node {
                     localId
                    content
                    id
                    published
                    author {
                        name
                        id
                        icon
                    }
                    replies {
                        totalCount
                    }

                }
            }
            
            totalCount
        }
    resources {
      totalCount
      edges {
        node {
          id
          localId
          name
          summary
          url
          icon
        }
      }
      
    }
  }
}
