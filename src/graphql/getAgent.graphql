#import "./fragments/basicComment.graphql"
#import "./fragments/basicCollection.graphql"
#import "./fragments/basicResource.graphql"
#import "./fragments/basicCommunity.graphql"
#import "./fragments/basicUser.graphql"
query getAgentQuery(
  $id: Int!, 
  $limitComm: Int, 
  $endComm: Int, 
  $limitColl: Int, 
  $endColl: Int, 
  $limitTimeline:Int, 
  $endTimeline:Int
  )  {
    user(localId: $id) {
        id
        localId
        name
        preferredUsername
        location
        summary
        icon
        image
        outbox (limit: $limitTimeline, after:$endTimeline) {
          pageInfo {
            startCursor
            endCursor
          }
          edges {
            node {
              id
              activityType
              type
              published
              user {
                ...BasicUser
              }
              object {
                __typename
                ... on Community {
                  ...BasicCommunity
                }
                ... on Comment {
                  ...BasicComment
                }
                ... on Collection {
                  ...BasicCollection
                }
                  ... on Resource {
                  ...BasicResource
                }
              }
            }
          }
        }
        joinedCommunities(limit: $limitComm, after:$endComm) {
          pageInfo {
            startCursor
            endCursor
          }
          edges {
            node {
              id
              name
              localId
              summary
              icon
              preferredUsername
              followed
              collections {
                totalCount
              }
              members {
                totalCount
              }
              threads {
                totalCount
              }
            }
          }
        }
        followingCollections(limit: $limitColl, after:$endColl) {
            pageInfo {
              startCursor
              endCursor
            }
            edges {
              node {
                id
                localId
                preferredUsername
                name
                community {
                  localId
                  id
                }
                summary
                icon
                followed
                followers {
                  totalCount
                }
                resources {
                  totalCount
                }
                threads {
                  totalCount
                }
                # followersCount
                # followingCount

              }
          }
        }
  }
}

