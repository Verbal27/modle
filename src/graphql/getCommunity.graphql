#import "./fragments/basicComment.graphql"
#import "./fragments/basicCollection.graphql"
#import "./fragments/basicResource.graphql"
#import "./fragments/basicCommunity.graphql"
#import "./fragments/basicUser.graphql"

query getCommunityQuery($context: Int!, $limit: Int, $end: Int) {
  community(localId: $context) {
    id
    localId
    preferredUsername
    name
    summary
    icon
    followed
    inbox(limit: $limit, after: $end) {
      pageInfo {
        startCursor
        endCursor
      }
      edges {
        node {
          id
          activityType
          type
          published
          user {
            ...BasicUser
          }
          object {
            __typename
            ... on Community {
              ...BasicCommunity
            }
            ... on Comment {
              ...BasicComment
            }
            ... on Collection {
              ...BasicCollection
            }
            ... on Resource {
              ...BasicResource
            }
          }
        }
      }
    }
    members {
      edges {
        node {
          id
          localId
          name
          icon
        }
      }
      totalCount
    }
    collections {
      totalCount
      edges {
        node {
          id
          localId
          preferredUsername
          name
          summary
          icon
          followed
          followers {
            totalCount
          }
          resources {
            totalCount
          }
          threads {
            totalCount
          }
          inbox {
            totalCount
          }
        }
      }
      totalCount
      pageInfo {
        startCursor
        endCursor
      }
    }
  }
}
