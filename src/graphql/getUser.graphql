#import "./fragments/basicComment.graphql"
#import "./fragments/basicCollection.graphql"
#import "./fragments/basicResource.graphql"
#import "./fragments/basicCommunity.graphql"
#import "./fragments/basicUser.graphql"
query getUser(
    $limitComm: Int,
    $endComm: String,
    $limitColl: Int,
    $endColl: String,
    $limitTimeline: Int,
    $endTimeline: String
) {
    me {
        user {
            id
            name
            preferredUsername
            location
            summary
            icon
            image
            followedCommunities(limit: $limitComm, after: $endComm) {
                pageInfo { startCursor endCursor }
                edges {
                    node {
                        id
                        canonicalUrl
                        preferredUsername
                        name
                        summary
                        icon
                        isLocal
                        isPublic
                        isDisabled
                        myFollow    { id }
                        collections { totalCount }
                        followers   { totalCount }
                        threads     { totalCount }
                    }
                }
            }
            outbox(limit: $limitTimeline, after: $endTimeline) {
                pageInfo { startCursor endCursor }
                edges {
                    node {
                        id
                        canonicalUrl
                        verb
                        isLocal
                        isPublic
                        createdAt
                        user { ...BasicUser }
                        noun {
                            __typename
                            ... on Community  { ...BasicCommunity  }
                            ... on Comment    { ...BasicComment    }
                            ... on Collection { ...BasicCollection }
                            ... on Resource   { ...BasicResource   }
                        }
                    }
                }
            }
            followingCollections(limit: $limitColl, after: $endColl) {
                pageInfo { startCursor endCursor }
                edges {
                    node {
                        id
                        canonicalUrl
                        preferredUsername
                        name
                        summary
                        icon
                        isLocal
                        isPublic
                        isHidden
                        community { id }
                        myFollow  { id }
                        likes     { totalCount }
                        followers { totalCount }
                        resources { totalCount }
                        threads   { totalCount }
                    }
                }
            }
        }
    }
}
