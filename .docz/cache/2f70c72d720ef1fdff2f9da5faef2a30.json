{"remainingRequest":"/home/ivan/Sites/moodlenet/node_modules/thread-loader/dist/cjs.js??ref--11-1!/home/ivan/Sites/moodlenet/node_modules/docz-core/node_modules/babel-loader/lib/index.js??ref--11-2!/home/ivan/Sites/moodlenet/node_modules/source-map-loader/index.js!/home/ivan/Sites/moodlenet/src/components/elements/Collection/Join.tsx","dependencies":[{"path":"/home/ivan/Sites/moodlenet/src/components/elements/Collection/Join.tsx","mtime":1558085182951},{"path":"/home/ivan/Sites/moodlenet/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/ivan/Sites/moodlenet/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/ivan/Sites/moodlenet/node_modules/docz-core/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/ivan/Sites/moodlenet/node_modules/source-map-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF90YWdnZWRUZW1wbGF0ZUxpdGVyYWwgZnJvbSAiL2hvbWUvaXZhbi9TaXRlcy9tb29kbGVuZXQvbm9kZV9tb2R1bGVzL2RvY3otY29yZS9ub2RlX21vZHVsZXMvYmFiZWwtcHJlc2V0LXJlYWN0LWFwcC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vdGFnZ2VkVGVtcGxhdGVMaXRlcmFsIjsKdmFyIF9qc3hGaWxlTmFtZSA9ICIvaG9tZS9pdmFuL1NpdGVzL21vb2RsZW5ldC9zcmMvY29tcG9uZW50cy9lbGVtZW50cy9Db2xsZWN0aW9uL0pvaW4udHN4IjsKCihmdW5jdGlvbiAoKSB7CiAgdmFyIGVudGVyTW9kdWxlID0gKHR5cGVvZiByZWFjdEhvdExvYWRlckdsb2JhbCAhPT0gJ3VuZGVmaW5lZCcgPyByZWFjdEhvdExvYWRlckdsb2JhbCA6IHJlcXVpcmUoJ3JlYWN0LWhvdC1sb2FkZXInKSkuZW50ZXJNb2R1bGU7CiAgZW50ZXJNb2R1bGUgJiYgZW50ZXJNb2R1bGUobW9kdWxlKTsKfSkoKTsKCmZ1bmN0aW9uIF90ZW1wbGF0ZU9iamVjdDMoKSB7CiAgdmFyIGRhdGEgPSBfdGFnZ2VkVGVtcGxhdGVMaXRlcmFsKFsiXG4gIGNvbG9yOiAiLCAiO1xuICBiYWNrZ3JvdW5kOiAiLCAiO1xuICBjdXJzb3I6IHBvaW50ZXI7XG4gIGhlaWdodDogMzhweDtcbiAgbGluZS1oZWlnaHQ6IDM4cHg7XG4gIGJvcmRlci1yYWRpdXM6IDNweDtcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xuICBib3JkZXI6IDJweCBzb2xpZFxuICAgICIsICI7XG4gICY6aG92ZXIge1xuICAgIGNvbG9yOiAiLCAiO1xuICAgIGJhY2tncm91bmQ6ICIsICI7XG4gIH1cbiAgJiBzcGFuIHtcbiAgICBkaXNwbGF5OiBibG9jaztcbiAgICB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlO1xuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgfVxuICAmIHN2ZyB7XG4gICAgdmVydGljYWwtYWxpZ246IHN1YjtcbiAgICBjb2xvcjogaW5oZXJpdCAhaW1wb3J0YW50O1xuICB9XG4iXSk7CgogIF90ZW1wbGF0ZU9iamVjdDMgPSBmdW5jdGlvbiBfdGVtcGxhdGVPYmplY3QzKCkgewogICAgcmV0dXJuIGRhdGE7CiAgfTsKCiAgcmV0dXJuIGRhdGE7Cn0KCmZ1bmN0aW9uIF90ZW1wbGF0ZU9iamVjdDIoKSB7CiAgdmFyIGRhdGEgPSBfdGFnZ2VkVGVtcGxhdGVMaXRlcmFsKFsiXG4gICAgICAgICAgICAgICAgZnJhZ21lbnQgUmVzIG9uIENvbGxlY3Rpb24ge1xuICAgICAgICAgICAgICAgICAgZm9sbG93ZWRcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICJdKTsKCiAgX3RlbXBsYXRlT2JqZWN0MiA9IGZ1bmN0aW9uIF90ZW1wbGF0ZU9iamVjdDIoKSB7CiAgICByZXR1cm4gZGF0YTsKICB9OwoKICByZXR1cm4gZGF0YTsKfQoKZnVuY3Rpb24gX3RlbXBsYXRlT2JqZWN0KCkgewogIHZhciBkYXRhID0gX3RhZ2dlZFRlbXBsYXRlTGl0ZXJhbChbIlxuICAgICAgICAgICAgICAgIGZyYWdtZW50IFJlcyBvbiBDb2xsZWN0aW9uIHtcbiAgICAgICAgICAgICAgICAgIGZvbGxvd2VkXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAiXSk7CgogIF90ZW1wbGF0ZU9iamVjdCA9IGZ1bmN0aW9uIF90ZW1wbGF0ZU9iamVjdCgpIHsKICAgIHJldHVybiBkYXRhOwogIH07CgogIHJldHVybiBkYXRhOwp9CgppbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnOwppbXBvcnQgc3R5bGVkIGZyb20gJy4uLy4uLy4uL3RoZW1lcy9zdHlsZWQnOwppbXBvcnQgeyBjb21wb3NlLCB3aXRoU3RhdGUgfSBmcm9tICdyZWNvbXBvc2UnOwppbXBvcnQgeyBncmFwaHFsIH0gZnJvbSAncmVhY3QtYXBvbGxvJzsKCnZhciBfcmVxdWlyZSA9IHJlcXVpcmUoJy4uLy4uLy4uL2dyYXBocWwvam9pbkNvbGxlY3Rpb24uZ3JhcGhxbCcpLAogICAgam9pbkNvbGxlY3Rpb25NdXRhdGlvbiA9IF9yZXF1aXJlLmpvaW5Db2xsZWN0aW9uTXV0YXRpb247Cgp2YXIgX3JlcXVpcmUyID0gcmVxdWlyZSgnLi4vLi4vLi4vZ3JhcGhxbC91bmRvSm9pbkNvbGxlY3Rpb24uZ3JhcGhxbCcpLAogICAgdW5kb0pvaW5Db2xsZWN0aW9uTXV0YXRpb24gPSBfcmVxdWlyZTIudW5kb0pvaW5Db2xsZWN0aW9uTXV0YXRpb247CgppbXBvcnQgZ3FsIGZyb20gJ2dyYXBocWwtdGFnJzsKaW1wb3J0IHsgRXllLCBVbmZvbGxvdyB9IGZyb20gJy4uL0ljb25zJzsKaW1wb3J0IExvYWRlciBmcm9tICcuLi9Mb2FkZXIvTG9hZGVyJzsKdmFyIHdpdGhKb2luQ29sbGVjdGlvbiA9IGdyYXBocWwoam9pbkNvbGxlY3Rpb25NdXRhdGlvbiwgewogIG5hbWU6ICdqb2luQ29sbGVjdGlvbicgLy8gVE9ETyBlbmZvcmNlIHByb3BlciB0eXBlcyBmb3IgT3BlcmF0aW9uT3B0aW9uCgp9KTsKdmFyIHdpdGhMZWF2ZUNvbGxlY3Rpb24gPSBncmFwaHFsKHVuZG9Kb2luQ29sbGVjdGlvbk11dGF0aW9uLCB7CiAgbmFtZTogJ2xlYXZlQ29sbGVjdGlvbicgLy8gVE9ETyBlbmZvcmNlIHByb3BlciB0eXBlcyBmb3IgT3BlcmF0aW9uT3B0aW9uCgp9KTsKCnZhciBKb2luID0gZnVuY3Rpb24gSm9pbihfcmVmKSB7CiAgdmFyIGpvaW5Db2xsZWN0aW9uID0gX3JlZi5qb2luQ29sbGVjdGlvbiwKICAgICAgaWQgPSBfcmVmLmlkLAogICAgICBsZWF2ZUNvbGxlY3Rpb24gPSBfcmVmLmxlYXZlQ29sbGVjdGlvbiwKICAgICAgZXh0ZXJuYWxJZCA9IF9yZWYuZXh0ZXJuYWxJZCwKICAgICAgZm9sbG93ZWQgPSBfcmVmLmZvbGxvd2VkLAogICAgICBpc1N1Ym1pdHRpbmcgPSBfcmVmLmlzU3VibWl0dGluZywKICAgICAgb25TdWJtaXR0aW5nID0gX3JlZi5vblN1Ym1pdHRpbmc7CgogIGlmIChmb2xsb3dlZCkgewogICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoU3BhbiwgewogICAgICB1bmZvbGxvdzogdHJ1ZSwKICAgICAgb25DbGljazogZnVuY3Rpb24gb25DbGljaygpIHsKICAgICAgICBvblN1Ym1pdHRpbmcodHJ1ZSk7CiAgICAgICAgcmV0dXJuIGxlYXZlQ29sbGVjdGlvbih7CiAgICAgICAgICB2YXJpYWJsZXM6IHsKICAgICAgICAgICAgY29sbGVjdGlvbklkOiBpZAogICAgICAgICAgfSwKICAgICAgICAgIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKHByb3h5LCBfcmVmMikgewogICAgICAgICAgICB2YXIgdW5kb0pvaW5Db2xsZWN0aW9uID0gX3JlZjIuZGF0YS51bmRvSm9pbkNvbGxlY3Rpb247CiAgICAgICAgICAgIHZhciBmcmFnbWVudCA9IGdxbChfdGVtcGxhdGVPYmplY3QoKSk7CiAgICAgICAgICAgIHZhciBjb2xsZWN0aW9uID0gcHJveHkucmVhZEZyYWdtZW50KHsKICAgICAgICAgICAgICBpZDogIkNvbGxlY3Rpb246Ii5jb25jYXQoZXh0ZXJuYWxJZCksCiAgICAgICAgICAgICAgZnJhZ21lbnQ6IGZyYWdtZW50LAogICAgICAgICAgICAgIGZyYWdtZW50TmFtZTogJ1JlcycKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGNvbGxlY3Rpb24uZm9sbG93ZWQgPSAhY29sbGVjdGlvbi5mb2xsb3dlZDsKICAgICAgICAgICAgcHJveHkud3JpdGVGcmFnbWVudCh7CiAgICAgICAgICAgICAgaWQ6ICJDb2xsZWN0aW9uOiIuY29uY2F0KGV4dGVybmFsSWQpLAogICAgICAgICAgICAgIGZyYWdtZW50OiBmcmFnbWVudCwKICAgICAgICAgICAgICBmcmFnbWVudE5hbWU6ICdSZXMnLAogICAgICAgICAgICAgIGRhdGE6IGNvbGxlY3Rpb24KICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICBvblN1Ym1pdHRpbmcoZmFsc2UpOwogICAgICAgIH0pWyJjYXRjaCJdKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICAgIHJldHVybiBjb25zb2xlLmxvZyhlcnIpOwogICAgICAgIH0pOwogICAgICB9LAogICAgICBfX3NvdXJjZTogewogICAgICAgIGZpbGVOYW1lOiBfanN4RmlsZU5hbWUsCiAgICAgICAgbGluZU51bWJlcjogNDYKICAgICAgfSwKICAgICAgX19zZWxmOiB0aGlzCiAgICB9LCBpc1N1Ym1pdHRpbmcgPyBSZWFjdC5jcmVhdGVFbGVtZW50KExvYWRlciwgewogICAgICBfX3NvdXJjZTogewogICAgICAgIGZpbGVOYW1lOiBfanN4RmlsZU5hbWUsCiAgICAgICAgbGluZU51bWJlcjogNzkKICAgICAgfSwKICAgICAgX19zZWxmOiB0aGlzCiAgICB9KSA6IFJlYWN0LmNyZWF0ZUVsZW1lbnQoUmVhY3QuRnJhZ21lbnQsIG51bGwsIFJlYWN0LmNyZWF0ZUVsZW1lbnQoVW5mb2xsb3csIHsKICAgICAgd2lkdGg6IDE4LAogICAgICBoZWlnaHQ6IDE4LAogICAgICBzdHJva2VXaWR0aDogMiwKICAgICAgY29sb3I6ICcjMWUxZjI0ODAnLAogICAgICBfX3NvdXJjZTogewogICAgICAgIGZpbGVOYW1lOiBfanN4RmlsZU5hbWUsCiAgICAgICAgbGluZU51bWJlcjogODIKICAgICAgfSwKICAgICAgX19zZWxmOiB0aGlzCiAgICB9KSkpOwogIH0gZWxzZSB7CiAgICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChTcGFuLCB7CiAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soKSB7CiAgICAgICAgb25TdWJtaXR0aW5nKHRydWUpOwogICAgICAgIHJldHVybiBqb2luQ29sbGVjdGlvbih7CiAgICAgICAgICB2YXJpYWJsZXM6IHsKICAgICAgICAgICAgY29sbGVjdGlvbklkOiBpZAogICAgICAgICAgfSwKICAgICAgICAgIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKHByb3h5LCBfcmVmMykgewogICAgICAgICAgICB2YXIgam9pbkNvbGxlY3Rpb24gPSBfcmVmMy5kYXRhLmpvaW5Db2xsZWN0aW9uOwogICAgICAgICAgICB2YXIgZnJhZ21lbnQgPSBncWwoX3RlbXBsYXRlT2JqZWN0MigpKTsKICAgICAgICAgICAgdmFyIGNvbGxlY3Rpb24gPSBwcm94eS5yZWFkRnJhZ21lbnQoewogICAgICAgICAgICAgIGlkOiAiQ29sbGVjdGlvbjoiLmNvbmNhdChleHRlcm5hbElkKSwKICAgICAgICAgICAgICBmcmFnbWVudDogZnJhZ21lbnQsCiAgICAgICAgICAgICAgZnJhZ21lbnROYW1lOiAnUmVzJwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgY29sbGVjdGlvbi5mb2xsb3dlZCA9ICFjb2xsZWN0aW9uLmZvbGxvd2VkOwogICAgICAgICAgICBwcm94eS53cml0ZUZyYWdtZW50KHsKICAgICAgICAgICAgICBpZDogIkNvbGxlY3Rpb246Ii5jb25jYXQoZXh0ZXJuYWxJZCksCiAgICAgICAgICAgICAgZnJhZ21lbnQ6IGZyYWdtZW50LAogICAgICAgICAgICAgIGZyYWdtZW50TmFtZTogJ1JlcycsCiAgICAgICAgICAgICAgZGF0YTogY29sbGVjdGlvbgogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgIG9uU3VibWl0dGluZyhmYWxzZSk7CiAgICAgICAgfSlbImNhdGNoIl0oZnVuY3Rpb24gKGVycikgewogICAgICAgICAgcmV0dXJuIGNvbnNvbGUubG9nKGVycik7CiAgICAgICAgfSk7CiAgICAgIH0sCiAgICAgIF9fc291cmNlOiB7CiAgICAgICAgZmlsZU5hbWU6IF9qc3hGaWxlTmFtZSwKICAgICAgICBsaW5lTnVtYmVyOiA5NAogICAgICB9LAogICAgICBfX3NlbGY6IHRoaXMKICAgIH0sIGlzU3VibWl0dGluZyA/IFJlYWN0LmNyZWF0ZUVsZW1lbnQoTG9hZGVyLCB7CiAgICAgIF9fc291cmNlOiB7CiAgICAgICAgZmlsZU5hbWU6IF9qc3hGaWxlTmFtZSwKICAgICAgICBsaW5lTnVtYmVyOiAxMjYKICAgICAgfSwKICAgICAgX19zZWxmOiB0aGlzCiAgICB9KSA6IFJlYWN0LmNyZWF0ZUVsZW1lbnQoUmVhY3QuRnJhZ21lbnQsIG51bGwsIFJlYWN0LmNyZWF0ZUVsZW1lbnQoInNwYW4iLCB7CiAgICAgIF9fc291cmNlOiB7CiAgICAgICAgZmlsZU5hbWU6IF9qc3hGaWxlTmFtZSwKICAgICAgICBsaW5lTnVtYmVyOiAxMjkKICAgICAgfSwKICAgICAgX19zZWxmOiB0aGlzCiAgICB9LCBSZWFjdC5jcmVhdGVFbGVtZW50KEV5ZSwgewogICAgICB3aWR0aDogMTgsCiAgICAgIGhlaWdodDogMTgsCiAgICAgIHN0cm9rZVdpZHRoOiAyLAogICAgICBjb2xvcjogJyNmOTgwMTInLAogICAgICBfX3NvdXJjZTogewogICAgICAgIGZpbGVOYW1lOiBfanN4RmlsZU5hbWUsCiAgICAgICAgbGluZU51bWJlcjogMTMwCiAgICAgIH0sCiAgICAgIF9fc2VsZjogdGhpcwogICAgfSkpKSk7CiAgfQp9OwoKdmFyIFNwYW4gPSBzdHlsZWQuZGl2KF90ZW1wbGF0ZU9iamVjdDMoKSwgZnVuY3Rpb24gKHByb3BzKSB7CiAgcmV0dXJuIHByb3BzLnVuZm9sbG93ID8gJyNmZmYnIDogcHJvcHMudGhlbWUuc3R5bGVzLmNvbG91ci5wcmltYXJ5Owp9LCBmdW5jdGlvbiAocHJvcHMpIHsKICByZXR1cm4gcHJvcHMudW5mb2xsb3cgPyBwcm9wcy50aGVtZS5zdHlsZXMuY29sb3VyLnByaW1hcnkgOiAndHJhbnNwYXJlbnQnOwp9LCBmdW5jdGlvbiAocHJvcHMpIHsKICByZXR1cm4gcHJvcHMudW5mb2xsb3cgPyBmdW5jdGlvbiAocHJvcHMpIHsKICAgIHJldHVybiBwcm9wcy50aGVtZS5zdHlsZXMuY29sb3VyLnByaW1hcnk7CiAgfSA6IHByb3BzLnRoZW1lLnN0eWxlcy5jb2xvdXIucHJpbWFyeTsKfSwgZnVuY3Rpb24gKHByb3BzKSB7CiAgcmV0dXJuIHByb3BzLnVuZm9sbG93ID8gZnVuY3Rpb24gKHByb3BzKSB7CiAgICByZXR1cm4gJ3doaXRlJzsKICB9IDogcHJvcHMudGhlbWUuc3R5bGVzLmNvbG91ci5iYXNlNjsKfSwgZnVuY3Rpb24gKHByb3BzKSB7CiAgcmV0dXJuIHByb3BzLnVuZm9sbG93ID8gcHJvcHMudGhlbWUuc3R5bGVzLmNvbG91ci5wcmltYXJ5IDogcHJvcHMudGhlbWUuc3R5bGVzLmNvbG91ci5uZXdjb21tdW5pdHlCZ0hvdmVyOwp9KTsKCnZhciBfZGVmYXVsdCA9IGNvbXBvc2Uod2l0aEpvaW5Db2xsZWN0aW9uLCB3aXRoTGVhdmVDb2xsZWN0aW9uLCB3aXRoU3RhdGUoJ2lzU3VibWl0dGluZycsICdvblN1Ym1pdHRpbmcnLCBmYWxzZSkpKEpvaW4pOwoKZXhwb3J0IGRlZmF1bHQgX2RlZmF1bHQ7CjsKCihmdW5jdGlvbiAoKSB7CiAgdmFyIHJlYWN0SG90TG9hZGVyID0gKHR5cGVvZiByZWFjdEhvdExvYWRlckdsb2JhbCAhPT0gJ3VuZGVmaW5lZCcgPyByZWFjdEhvdExvYWRlckdsb2JhbCA6IHJlcXVpcmUoJ3JlYWN0LWhvdC1sb2FkZXInKSkuZGVmYXVsdDsKCiAgaWYgKCFyZWFjdEhvdExvYWRlcikgewogICAgcmV0dXJuOwogIH0KCiAgcmVhY3RIb3RMb2FkZXIucmVnaXN0ZXIod2l0aEpvaW5Db2xsZWN0aW9uLCAid2l0aEpvaW5Db2xsZWN0aW9uIiwgIi9ob21lL2l2YW4vU2l0ZXMvbW9vZGxlbmV0L3NyYy9jb21wb25lbnRzL2VsZW1lbnRzL0NvbGxlY3Rpb24vSm9pbi50c3giKTsKICByZWFjdEhvdExvYWRlci5yZWdpc3Rlcih3aXRoTGVhdmVDb2xsZWN0aW9uLCAid2l0aExlYXZlQ29sbGVjdGlvbiIsICIvaG9tZS9pdmFuL1NpdGVzL21vb2RsZW5ldC9zcmMvY29tcG9uZW50cy9lbGVtZW50cy9Db2xsZWN0aW9uL0pvaW4udHN4Iik7CiAgcmVhY3RIb3RMb2FkZXIucmVnaXN0ZXIoSm9pbiwgIkpvaW4iLCAiL2hvbWUvaXZhbi9TaXRlcy9tb29kbGVuZXQvc3JjL2NvbXBvbmVudHMvZWxlbWVudHMvQ29sbGVjdGlvbi9Kb2luLnRzeCIpOwogIHJlYWN0SG90TG9hZGVyLnJlZ2lzdGVyKFNwYW4sICJTcGFuIiwgIi9ob21lL2l2YW4vU2l0ZXMvbW9vZGxlbmV0L3NyYy9jb21wb25lbnRzL2VsZW1lbnRzL0NvbGxlY3Rpb24vSm9pbi50c3giKTsKICByZWFjdEhvdExvYWRlci5yZWdpc3RlcihfZGVmYXVsdCwgImRlZmF1bHQiLCAiL2hvbWUvaXZhbi9TaXRlcy9tb29kbGVuZXQvc3JjL2NvbXBvbmVudHMvZWxlbWVudHMvQ29sbGVjdGlvbi9Kb2luLnRzeCIpOwp9KSgpOwoKOwoKKGZ1bmN0aW9uICgpIHsKICB2YXIgbGVhdmVNb2R1bGUgPSAodHlwZW9mIHJlYWN0SG90TG9hZGVyR2xvYmFsICE9PSAndW5kZWZpbmVkJyA/IHJlYWN0SG90TG9hZGVyR2xvYmFsIDogcmVxdWlyZSgncmVhY3QtaG90LWxvYWRlcicpKS5sZWF2ZU1vZHVsZTsKICBsZWF2ZU1vZHVsZSAmJiBsZWF2ZU1vZHVsZShtb2R1bGUpOwp9KSgpOw=="},{"version":3,"sources":["/home/ivan/Sites/moodlenet/src/components/elements/Collection/Join.tsx"],"names":["React","styled","compose","withState","graphql","require","joinCollectionMutation","undoJoinCollectionMutation","gql","Eye","Unfollow","Loader","withJoinCollection","name","withLeaveCollection","Join","joinCollection","id","leaveCollection","externalId","followed","isSubmitting","onSubmitting","variables","collectionId","update","proxy","undoJoinCollection","data","fragment","collection","readFragment","fragmentName","writeFragment","then","res","err","console","log","Span","div","props","unfollow","theme","styles","colour","primary","base6","newcommunityBgHover"],"mappings":"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","sourcesContent":["import React from 'react';\nimport styled from '../../../themes/styled';\nimport { compose, withState } from 'recompose';\nimport { graphql, OperationOption } from 'react-apollo';\nconst {\n  joinCollectionMutation\n} = require('../../../graphql/joinCollection.graphql');\nconst {\n  undoJoinCollectionMutation\n} = require('../../../graphql/undoJoinCollection.graphql');\nimport gql from 'graphql-tag';\nimport { Eye, Unfollow } from '../Icons';\nimport Loader from '../Loader/Loader';\n\ninterface Props {\n  joinCollection: any;\n  leaveCollection: any;\n  id: string;\n  followed: boolean;\n  externalId: string;\n  isSubmitting: boolean;\n  onSubmitting: any;\n}\n\nconst withJoinCollection = graphql<{}>(joinCollectionMutation, {\n  name: 'joinCollection'\n  // TODO enforce proper types for OperationOption\n} as OperationOption<{}, {}>);\n\nconst withLeaveCollection = graphql<{}>(undoJoinCollectionMutation, {\n  name: 'leaveCollection'\n  // TODO enforce proper types for OperationOption\n} as OperationOption<{}, {}>);\n\nconst Join: React.SFC<Props> = ({\n  joinCollection,\n  id,\n  leaveCollection,\n  externalId,\n  followed,\n  isSubmitting,\n  onSubmitting\n}) => {\n  if (followed) {\n    return (\n      <Span\n        unfollow\n        onClick={() => {\n          onSubmitting(true);\n          return leaveCollection({\n            variables: { collectionId: id },\n            update: (proxy, { data: { undoJoinCollection } }) => {\n              const fragment = gql`\n                fragment Res on Collection {\n                  followed\n                }\n              `;\n              let collection = proxy.readFragment({\n                id: `Collection:${externalId}`,\n                fragment: fragment,\n                fragmentName: 'Res'\n              });\n              collection.followed = !collection.followed;\n              proxy.writeFragment({\n                id: `Collection:${externalId}`,\n                fragment: fragment,\n                fragmentName: 'Res',\n                data: collection\n              });\n            }\n          })\n            .then(res => {\n              onSubmitting(false);\n            })\n            .catch(err => console.log(err));\n        }}\n      >\n        {isSubmitting ? (\n          <Loader />\n        ) : (\n          <>\n            <Unfollow\n              width={18}\n              height={18}\n              strokeWidth={2}\n              color={'#1e1f2480'}\n            />\n          </>\n        )}\n      </Span>\n    );\n  } else {\n    return (\n      <Span\n        onClick={() => {\n          onSubmitting(true);\n          return joinCollection({\n            variables: { collectionId: id },\n            update: (proxy, { data: { joinCollection } }) => {\n              const fragment = gql`\n                fragment Res on Collection {\n                  followed\n                }\n              `;\n              let collection = proxy.readFragment({\n                id: `Collection:${externalId}`,\n                fragment: fragment,\n                fragmentName: 'Res'\n              });\n              collection.followed = !collection.followed;\n              proxy.writeFragment({\n                id: `Collection:${externalId}`,\n                fragment: fragment,\n                fragmentName: 'Res',\n                data: collection\n              });\n            }\n          })\n            .then(res => {\n              onSubmitting(false);\n            })\n            .catch(err => console.log(err));\n        }}\n      >\n        {isSubmitting ? (\n          <Loader />\n        ) : (\n          <>\n            <span>\n              <Eye width={18} height={18} strokeWidth={2} color={'#f98012'} />\n            </span>\n          </>\n        )}\n      </Span>\n    );\n  }\n};\n\nconst Span = styled.div<{ unfollow?: boolean }>`\n  color: ${props =>\n    props.unfollow ? '#fff' : props.theme.styles.colour.primary};\n  background: ${props =>\n    props.unfollow ? props.theme.styles.colour.primary : 'transparent'};\n  cursor: pointer;\n  height: 38px;\n  line-height: 38px;\n  border-radius: 3px;\n  text-align: center;\n  border: 2px solid\n    ${props =>\n      props.unfollow\n        ? props => props.theme.styles.colour.primary\n        : props.theme.styles.colour.primary};\n  &:hover {\n    color: ${props =>\n      props.unfollow ? props => 'white' : props.theme.styles.colour.base6};\n    background: ${props =>\n      props.unfollow\n        ? props.theme.styles.colour.primary\n        : props.theme.styles.colour.newcommunityBgHover};\n  }\n  & span {\n    display: block;\n    vertical-align: middle;\n    text-align: center;\n  }\n  & svg {\n    vertical-align: sub;\n    color: inherit !important;\n  }\n`;\n\nexport default compose(\n  withJoinCollection,\n  withLeaveCollection,\n  withState('isSubmitting', 'onSubmitting', false)\n)(Join);\n"]}]}